期刊：IEEE ROBOTICS AND AUTOMATION LETTERS （RA-L）

文章全称：4D iRIOM: 4D Imaging Radar Inertial Odometry and Mapping

# 零、问题和概念

## 概念

##### 1、最小二乘法

最小化测量值和预测值之间的差异平方和。

# 一、引言

## 1.1 4D成像雷达介绍

4D成像雷达，全称“4D毫米波成像雷达”

传统毫米波（3D雷达）的三个维度：

- 距离（Range）
- 速度（Velocity）
- 方位角（Azimuth）



4D成像雷达增加的维度：俯仰角

# 二、系统架构

![image-20230712111515407](https://raw.githubusercontent.com/letMeEmoForAWhile/typoraImage/main/img/image-20230712111515407.png)

- 输入：时间对齐的雷达扫描点云数据和6DIMU数据。
- 首先，通过预处理滤掉多径和散射造成的噪声点。
- 其次，通过IMU传播系统状态(位置，姿态，速度等)。
  - 通过==入射雷达扫描<!--imcoming radar 指的是发射的雷达光束返回还是单指作为系统输入的雷达光束。-->==获得自身速度。
  - 通过扫描到子图匹配(scan-to-submap matching)获得**点匹配**。

- 第三，通过估计的姿态将雷达扫描转换到全局坐标系中，以更新局部子地图和全局地图。
- 最后，通过scancontext检测环路。



AI Answer

所提出的系统iRIOM是一种基于子图概念的实时成像雷达惯性里程测绘方法。该系统的框架和流程如下：

1.数据采集：该系统使用四维成像雷达在雾等恶劣条件下测量物体的距离、方向、多普勒速度和高度。该系统还使用6D惯性传感器来测量平台的加速度和角速度。

2.Ego-Velocity 估计：该系统使用渐变非凸度方法从单次雷达扫描中估算自我速度。该方法在处理移动物体和多路径反射方面既稳健又高效。

3.Scan-to-submap 匹配：系统使用分布到多分布的距离进行匹配，以测量稀疏的非重复雷达扫描点和子地图点之间的一致性。

4.融合 Ego-Velocity 和惯性数据：该系统通过迭代扩展卡尔曼滤波器将 ego-velocity 和 scan-to-submap 匹配与 6D 惯性数据融为一体，以获得平台的 3D 位置和方向。

5.回路闭合：系统使用回路闭合模块来抑制里程计模块的漂移。

6.映射：系统使用子地图概念来构建环境地图。子映射是通过将环境分成几个小区域并将其与之前的子映射对齐来创建的。

7.评估：该系统是根据我们和第三方的数据进行评估的，结果显示iRiom具有良好的里程测量精度和与FastLIO-SLAM和EKFRIO相比的地图一致性。

总而言之，iRIOM 系统使用 4D 成像雷达和 6D 惯性传感器来估算自我运动并绘制环境地图。该系统利用成像雷达的丰富数据和子地图概念来提高里程计和测绘的准确性和一致性。

## 2.1 雷达数据预处理

引用文献[24]，使用考虑==空间分布的松弛滤波==来去除噪声点。
$$
P = \{p_i|Num(p_j) > N_{th}     \space and \space \left\| p_i - p_j \right\|< D_{th} \}\\
P = \{p_i|Std(p_j) < \sigma_{th} \space and \space \left\| p_i - p_j \right\|< D_{th} \}
$$

- P是==内部点==的集合。
- $p_j$是$p_i$在半径为$D_{th}$范围内的邻居点,$Num(p_j)$是邻居点的数量，$Std(p_j)$是邻居点的==统计标准偏差==。
- $N_{th}$和$\sigma_{th}$是相应的阈值。

### 2.1.1 自我速度评估

##### 目标：

估计系统相对于静态世界的速度：$^RV_m$



##### 存在的挑战：

- ==对于雷达坐标系{R}<!--指的是初始坐标系还是会随着雷达移动而一起移动的坐标系-->中$\rho$ 处的静态世界点，它的一维多普勒速度测量$v^d$ 与雷达在{R}中的自我运动，$^RV_m$有关。==

$$
v^d = \rho^T · ^RV_m/ \left\| \rho \right\|
$$
- 最小二乘法估计自我运动的问题：利用雷达扫描中的多普雷速度测量值来估计自身速度，通常使用最小二乘法来完成。但是这种方法对于雷达扫描中的移动点可能无效，导致估计错误。

- 解决方法：使用权重不同的迭代方法或者==RANSAC(随机样本共识)方法==。



##### 具体实现：

由于雷达数据是稀疏(点数小于500)的并且包含了许多移动点，采用GNC方法来评估自我运动。

- GNC是一种**非最小求解器**，在处理稀疏数据集中的稀疏点，比RANSAC效果更好。比半定编程更有效，因为后者不适用于观测值超过100的问题。

- GNC重复以下三个步骤：

  1. 通过线性最小二乘问题估计$^RV_m$
     $$
     \mathop{min}\limits_{ ^RV_m } \sum^n_{i=1} w_i \left\| v_i^d - \rho^T_i· ^RV_m / \left\| \rho_i \right\| \right\|^2
     $$

  2. 估计权重$w_i$
     $$
     w_i = (\mu \overline{c}^2 / ( \hat{r}^2_i + \mu \overline{c}^2 ))^2\\
     \hat{r}_i \dot{=} v_i^d - \rho^T_i· ^RV_m / \left\| \rho_i \right\|
     $$
     
  3. 更新$\mu \leftarrow \mu/1.4$
  
- 最开始，所有权重被初始化为1，$\mu = 4r^2_{max} / \overline{c}^2 , \overline{c} = 2 \sigma_r$,$r^2_{max}$是最大**平方残差误差**，$\sigma_r$是多普雷速度的准确性。

- 循环停止的条件：$\mu < 1$

- 最终得到的结果：

##  2.2 IMU状态传递

$$
x = \left[ ^Gp_I, ^Gv_I, ^GR_I, b_a, b_w, ^IR_R, ^Il_R, ^Gg \right]\\
u = \left[ a_m, w_m \right] \space \space \space w = [n_a, n_w, n_{ba}, n_{bw}]
$$

- $x$表示状态
- $u$表述输入控制，eg：IMU数据
- $w$是系统噪声
- $^Gp_I, ^Gv_I, ^GR_I$是IMU在世界坐标的位置，速度和角度
- 